/*!
  * wia base v0.1.11
  * (c) 2020 Sibyl Yu
  * @license MIT
  */
"use strict";var e={touch:!!(window.navigator.maxTouchPoints>0||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),pointerEvents:!!window.PointerEvent,observer:"MutationObserver"in window||"WebkitMutationObserver"in window,passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:"ongesturestart"in window,intersectionObserver:"IntersectionObserver"in window},t=[],n={},r=t.filter,o=t.slice,i=n.toString,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,s=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,c=/^\s*<(\w+|!)[^>]*>/,u=1;document.ready=function(e){if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)setTimeout((function(){e(m)}),0);else{var t=function t(){document.removeEventListener("DOMContentLoaded",t,!1),window.removeEventListener("load",t,!1),e(m)};document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)}};var l=function(){function e(e,t){for(var n=e?e.length:0,r=0;r<n;r++)this[r]=e[r];this.dom=e?e[0]:null,this.length=n,this.selector=t||""}e.isD=function(t){return t instanceof e};var n=e.prototype;return n.hasClass=function(e){return t.some.call(this,(function(t){return t.classList.contains(e)}))},n.addClass=function(e,t){if(void 0===e)return this;for(var n=e.split(" "),r=0;r<n.length;r+=1)for(var o=0;o<this.length;o+=1){var i=this[o];void 0!==i&&void 0!==i.classList&&(1===arguments.length?i.classList.add(n[r]):t&&(m("."+n[r],i.parentNode).removeClass(n[r]),i.classList.add(n[r])))}return this},n.removeClass=function(e){for(var t=e.split(" "),n=0;n<t.length;n+=1)for(var r=0;r<this.length;r+=1)void 0!==this[r]&&void 0!==this[r].classList&&this[r].classList.remove(t[n]);return this},n.clearClass=function(){for(var e,t=0;t<this.length;t+=1)if(void 0!==this[t]&&void 0!==this[t].classList){e=this[t];for(var n=0;n<e.classList.length;n++)e.classList.remove(e.classList.item(n))}return this},n.replaceClass=function(e,t){for(var n,r=0;r<this.length;r+=1)void 0!==this[r]&&void 0!==this[r].classList&&((n=this[r]).contains(e)?n.classList.replace(e,t):n.classList.add(t));return this},n.toggleClass=function(e,t){for(var n=e.split(" "),r=0;r<n.length;r+=1)for(var o=0;o<this.length;o+=1)void 0!==this[o]&&void 0!==this[o].classList&&(1===arguments.length?this[o].classList.toggle(n[r]):t?this[o].classList.add(n[r]):this[o].classList.remove(n[r]));return this},e}();function f(e){var t=!!e&&"length"in e&&e.length,n=m.type(e);return"function"!=n&&!m.isWindow(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function d(e,t,n){var r;if(a.test(e)&&(r=m(document.createElement(RegExp.$1))),!r){e.replace&&(e=e.replace(s,"<$1></$2>")),void 0===t&&(t=c.test(e)&&RegExp.$1);var i={tr:"tbody",tbody:"table",thead:"table",tfoot:"table",td:"tr",th:"tr",li:"ul",option:"select","*":"div"};t in i||(t="*");var u=document.createElement(i[t]);u.innerHTML=""+e,r=m.each(o.call(u.childNodes),(function(){u.removeChild(this)}))}if(m.isPlainObject(n)){var l=m(r),f=["val","css","html","text","data","width","height","offset"];m.each(n,(function(e,t){f.indexOf(e)>-1?l[e](t):l.attr(e,t)}))}return r}function m(e,t){var n,o=[];if(e)if("string"==typeof e)if("#"===(e=(e||"").trim())[0]){var i=document.getElementById(e.substr(1));i&&o.push(i)}else"<"===e[0]&&c.test(e)?(o=d(e,RegExp.$1,t),e=null):o=m.qsa(e,t);else if(e.nodeType||e===window||e===document)o=[e],e=null;else{if(l.isD(e))return e;if(m.isFunction(e))return document.ready(e);m.isArray(e)?(n=e,o=r.call(n,(function(e){return null!=e}))):c.test(e)&&(o=d(e,RegExp.$1,t),e=null)}return new l(o,e)}m.uuid=0,m.expr={},m.noop=function(){},m.support=e;var h=Object.prototype.toString;function p(e,t,n){if(null!=t)for(var r=Object.keys(Object(t)),o=0,i=r.length;o<i;o+=1){var a=r[o],s=Object.getOwnPropertyDescriptor(t,a);void 0!==s&&s.enumerable&&(n&&(m.isPlainObject(t[a])||m.isArray(t[a]))?(m.isPlainObject(t[a])&&!m.isPlainObject(e[a])&&(e[a]={}),m.isArray(t[a])&&!m.isArray(e[a])&&(e[a]=[]),p(e[a],t[a],n)):e[a]=t[a])}}m.type=function(e){return null==e?String(e):n[i.call(e)]||"object"},m.isWindow=function(e){return null!=e&&e==e.window},m.isObject=function(e){return"object"===m.type(e)},m.isObj=m.isObject,m.isValue=function(e){return"string"===m.type(e)||"number"===m.type(e)||"boolean"===m.type(e)},m.isVal=m.isValue,m.isFunction=function(e){return"function"===m.type(e)},m.isFun=m.isFunction,m.isDocument=function(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE},m.isDoc=m.isDocument,m.isPlainObject=function(e){return m.isObject(e)&&!m.isWindow(e)&&Object.getPrototypeOf(e)==Object.prototype},m.isPlain=m.isPlainObject,m.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},m.isEmpty=function(e){return m.isObject(e)?m.isEmptyObject(e):m.isArray(e)?0===e.length:""===e||null==e},m.hasVal=function(e){return!m.isEmpty(e)},m.isArray=Array.isArray||function(e){return e instanceof Array},m.inArray=function(e,n,r){return t.indexOf.call(n,e,r)},m.isNumeric=function(e){return"number"==typeof e||m.isObject(e)&&"[object Number]"==(null==(t=e)?void 0===t?"[object Undefined]":"[object Null]":h.call(t));var t},m.isNumber=m.isNumeric,m.isNum=m.isNumeric,m.isString=function(e){return"string"===m.type(e)},m.isStr=m.isString,m.isDom=function(e){return l.isD(e)},m.contains=document.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},m.funcArg=function(e,t,n,r){return isFunction(t)?t.call(e,n,r):t},m.trim=function(e){return null==e?"":String.prototype.trim.call(e)},m.map=function(e,t){var n,r,o,i=[];if(f(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&i.push(n);else for(o in e)null!=(n=t(e[o],o))&&i.push(n);return i},m.each=function(e,t){var n,r;if(f(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},m.forEach=function(e,t){var n,r;if(f(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],e[n],n))return e}else for(r in e)if(!1===t.call(e[r],e[r],r))return e;return e},m.grep=function(e,t){return r.call(e,t)},m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){n["[object "+t+"]"]=t.toLowerCase()})),m.id=function(e){return document.getElementById(e)},m.qu=function(e,t){return t?l.isD(t)?t[0].querySelector(e):t.querySelector(e):document.querySelector(e)},m.qus=m.qsa=function(e,t){var n=null;return(n=t?l.isD(t)?t[0].querySelectorAll(e):t.querySelectorAll(e):document.querySelectorAll(e))&&n.length>0?o.call(n):[]},m.qn=function(e,t){var n='[name="'+e+'"]';return m.qu(n,t)},m.qns=function(e,t){var n=null;return(n=t?l.isD(t)?t[0].getElementsByName(e):t.getElementsByName(e):document.getElementsByName(e))&&n.length>0?o.call(n):[]},m.qcs=function(e,t){var n=null;return(n=t?l.isD(t)?t[0].getElementsByClassName(e):t.getElementsByClassName(e):document.getElementsByClassName(e))&&n.length>0?o.call(n):[]},m.qts=function(e,t){var n=null;return(n=t?l.isD(t)?t[0].getElementsByTagName(e):t.getElementsByTagName(e):document.getElementsByTagName(e))&&n.length>0?o.call(n):[]},m.assign=function(e){if(!e)return{};for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"boolean"==typeof e&&(t=e,e=r.shift()),r.forEach((function(n){p(e,n,t)})),e},m.extend=m.assign,m.merge=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];return t.splice(0,1),t.forEach((function(e){p(r,e,!1)})),r},m.fastLink=function(){try{if(!m.support.touch)return;m.qus("a").forEach((function(e){var t,n;(e.hasAttribute("fastlink")||e.hasAttribute("fastLink"))&&(e.ontouchstart=function(e){t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY},e.ontouchend=function(r){if(Math.abs(r.changedTouches[0].clientX-t)<=5&&Math.abs(r.changedTouches[0].clientY-n)<=5){if(e.hasAttribute("back")||e.hasClass("back"))return window.history.back();e.href&&(window.location.href=e.href)}})}))}catch(e){alert("fastLink exp: "+e.message)}},m.requestAnimationFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.setTimeout(e,1e3/60)},m.cancelAnimationFrame=function(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.clearTimeout(e)},m.deleteProps=function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))},m.nextTick=function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},m.nextFrame=function(e){return m.requestAnimationFrame((function(){m.requestAnimationFrame(e)}))},m.now=function(){return Date.now()},m.date=function(e,t){e||(e="yyyy-MM-dd"),t?"string"==typeof t?(t=t.replace(/\-/g,"/").replace(/T/g," ").replace(/\.+[0-9]+[A-Z]$/,""),t=new Date(t).getTime()-(new Date).getTimezoneOffset()/60*36e5,t=new Date(t)):m.isNumber(t)&&(t=new Date(Date.now()+864e5*t)):t=new Date;var n={y:t.getFullYear().toString(),M:t.getMonth()+1,d:t.getDate(),H:t.getHours(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds(),q:Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds().toString().padStart(3,"0")};return(e=(e=e.replace(/(S+)/g,n.S).replace(/(y+)/gi,(function(e){return n.y.slice(-e.length)}))).replace(/(M+|d+|h+|H+|m+|s+|q+)/g,(function(e){return((e.length>1?"0":"")+n[e.slice(-1)]).slice(-2)}))).replace(/\s+00:00:00$/g,"")},m.uniqueNumber=function(){return u+=1},m.num=m.uniqueNumber,m.uid=function(e,t){void 0===e&&(e="xxxxxxxxxx"),void 0===t&&(t="0123456789abcdef");var n=t.length;return e.replace(/x/g,(function(){return t[Math.floor(Math.random()*n)]}))},m.camelCase=function(e){return e.toLowerCase().replace(/-+(.)/g,(function(e,t){return t?t.toUpperCase():""}))},m.uniq=function(e){return r.call(e,(function(t,n){return e.indexOf(t)===n}))},m.promisify=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise((function(t,r){e.apply(void 0,n.concat([function(e,n){e?r(e):t(n)}]))}))}},m.promise=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise((function(t,r){try{e.apply(void 0,n.concat([function(e){t(e)}]))}catch(e){r(e.message)}}))}},m.urlParam=function(e){var t,n,r,o,i={},a=e||window.location.href;if("string"==typeof a&&a.length)for(o=(n=(a=a.indexOf("?")>-1?a.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,t=0;t<o;t+=1)r=n[t].replace(/#\S+/g,"").split("="),i[decodeURIComponent(r[0])]=void 0===r[1]?void 0:decodeURIComponent(r.slice(1).join("="))||"";return i},m.deserializeValue=function(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?JSON.parse(e):e):e}catch(t){return e}},m.ready=document.ready,m.fn=l.prototype,m.Class=l,m.Dom=l,m.window=window,m.document=document;var g={};var w=Object.freeze({__proto__:null,on:function(e,t){return g[e]=g[e]||[],g[e].includes(t)||g[e].push(t),this},off:function(e,t){return t?g[e].forEach((function(n,r){(n===t||n.proxy&&n.proxy===t)&&g[e].splice(r,1)})):delete g[e],this},once:function(e,t){var n=this;function r(){$.off(e,t),r.proxy&&delete r.proxy;for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t.apply(n,i)}return r.proxy=t,$.on(e,r),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=g[e]&&g[e].slice();return i&&i.forEach((function(e){e.apply(t,r)})),this}});function v(e){var t="";if(!e||!localStorage)return"";var n=localStorage.getItem(e);try{if(n=JSON.parse(n)){var r=Math.trunc(Date.now()/1e3);if(n.time&&n.exp){var o=r-n.time;o>60*n.exp?(localStorage.removeItem(e),console.info("store.get("+e+") dur:"+o+" > exp:"+60*n.exp)):n.val&&(t=n.val)}else n.val&&(console.error("store.get("+e+") no time and exp"),t=n.val)}}catch(e){console.log("store.get exp:"+e.message)}return t}var y=Object.freeze({__proto__:null,set:function(e,t,n){var r={exp:n||43200,time:Math.trunc(Date.now()/1e3),val:t};e&&localStorage&&localStorage.setItem(e,JSON.stringify(r))},get:v,remove:function(e){localStorage&&localStorage.removeItem(e)},clear:function(){localStorage&&localStorage.clear()},check:function(){if(localStorage)for(var e=0;e<localStorage.length;e++)v(localStorage.key(e))}});function b(){var e=null;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}var O=function(e){var t="",n=e.responseText,r=e.responseType,o=e.status,i=e.statusText;if(n&&"text"===r&&/^\s*[{[]/.test(n))try{t=JSON.parse(n)}catch(e){t=n}else t=o+" "+i;var a=new Error(t);return a.status=o,a},x=function(e){if(e&&/^\s*[{[]/.test(e))try{return JSON.parse(e)}catch(e){console.log("parseSuccess",{exp:e.message})}return e};var S=Object.freeze({__proto__:null,get:function(e,t,n){return new Promise((function(r,o){var i=b();i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var e=x(i.responseText);r(e)}else o(O(i))},i.onerror=function(e){o(O(i))},t?("object"==typeof patam&&(t=Object.keys(t).map((function(e){return e+"="+data[e]})).sort().join("&")),i.open("GET",e+"?"+t,!0)):i.open("GET",e,!0),n&&Object.keys(n).forEach((function(e){i.setRequestHeader(e,n[e])})),i.send(null)}))},post:function(e,t,n){return new Promise((function(r,o){var i=b();i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var e=x(i.responseText);r(e)}else o(O(i))},i.onerror=function(e){o(O(i))},i.open("POST",e,!0);var a=t;t&&t instanceof FormData||(t&&"object"==typeof t?(a=JSON.stringify(t),i.setRequestHeader("Content-type","application/json; charset=utf-8")):i.setRequestHeader("Content-Type","application/x-www-form-urlencoded")),n&&Object.keys(n).forEach((function(e){i.setRequestHeader(e,n[e])})),i.send(a)}))}}),E={},j={};
/*!*******************!*\
! ** * 动态模块管理 ** * !
\***********************/function A(e){Object.keys(e).forEach((function(t){"R"!==t&&"M"!==t&&(e[t]=new Function("module","exports","_m_","'use strict';"+e[t]),j[t]=e[t])}))}var L=Object.freeze({__proto__:null,cache:E,module:j,load:function e(t){if(E[t])return E[t].exports;var n={i:t,l:!1,exports:{}};return E[t]=n,j[t]?j[t].call(n.exports,n,n.exports,e):alert("load module ["+t+"] not exist!"),n.l=!0,n.exports},add:A,get:function(e,t){var n=t.map((function(t){var n=t.indexOf("?v="),r=t.substr(n+3),o="app "+t.substr(0,n);console.log("get module key:"+o+" ver:"+r);var i=$.store.get(o)||"";if(i){console.log("get module local key:"+o+" ok!");var a=JSON.parse(i);(!a.R||!a.R.ver||a.R&&a.R.ver&&a.R.ver!==r)&&($.store.remove(o),i="",console.log("get module local key:"+o+" ver:"+a.R.ver+" != "+r))}return i?Promise.resolve(i):$.get(e+t).then((function(n){if(n)return console.log("get module clound "+(e+t)+" ok!"),$.store.set(o,n),n}))}));return Promise.all(n).then((function(e){e.forEach((function(e){var t=e&&JSON.parse(e);t&&A(t)}))}))}}),M=function(){var t=window.navigator.platform,n=window.navigator.userAgent,r={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!window.cordova&&!window.phonegap),phonegap:!(!window.cordova&&!window.phonegap),electron:!1},o=window.screen.width,i=window.screen.height,a=n.match(/(Android);?[\s\/]+([\d.]+)?/),s=n.match(/(iPad).*OS\s([\d_]+)/),c=n.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&n.match(/(iPhone\sOS|iOS)\s([\d_]+)/),l=n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0,f=n.indexOf("Edge/")>=0,d=n.indexOf("Gecko/")>=0&&n.indexOf("Firefox/")>=0,m="Win32"===t,h=n.toLowerCase().indexOf("electron")>=0,p="MacIntel"===t;!s&&p&&e.touch&&(1024===o&&1366===i||834===o&&1194===i||834===o&&1112===i||768===o&&1024===i)&&(s=n.match(/(Version)\/([\d.]+)/),p=!1),r.ie=l,r.edge=f,r.firefox=d,a&&!m&&(r.os="android",r.osVersion=a[2],r.android=!0,r.androidChrome=n.toLowerCase().indexOf("chrome")>=0),(s||u||c)&&(r.os="ios",r.ios=!0),u&&!c&&(r.osVersion=u[2].replace(/_/g,"."),r.iphone=!0),s&&(r.osVersion=s[2].replace(/_/g,"."),r.ipad=!0),c&&(r.osVersion=c[3]?c[3].replace(/_/g,"."):null,r.ipod=!0),r.ios&&r.osVersion&&n.indexOf("Version/")>=0&&"10"===r.osVersion.split(".")[0]&&(r.osVersion=n.toLowerCase().split("version/")[1].split(" ")[0]),r.webView=!(!(u||s||c)||!n.match(/.*AppleWebKit(?!.*Safari)/i)&&!window.navigator.standalone)||window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,r.webview=r.webView,r.standalone=r.webView,r.desktop=!(r.ios||r.android)||h,r.desktop&&(r.electron=h,r.macos=p,r.windows=m,r.macos&&(r.os="macos"),r.windows&&(r.os="windows")),r.pixelRatio=window.devicePixelRatio||1;return r.prefersColorScheme=function(){var e;return window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches&&(e="light"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),e},r.wechat=/MicroMessenger/i.test(n),r.weixin=r.wechat,r}();void 0===window.$&&(window.$=m),m.device=M,Object.keys(w).forEach((function(e){m[e]=w[e]})),Object.keys(S).forEach((function(e){m[e]=S[e]})),m.store={},Object.keys(y).forEach((function(e){m.store[e]=y[e]})),m.M={},Object.keys(L).forEach((function(e){m.M[e]=L[e]})),module.exports=m;